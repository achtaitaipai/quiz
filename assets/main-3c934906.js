var m=Object.defineProperty;var p=(n,i,r)=>i in n?m(n,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[i]=r;var c=(n,i,r)=>(p(n,typeof i!="symbol"?i+"":i,r),r);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const o of t.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(e){if(e.ep)return;e.ep=!0;const t=r(e);fetch(e.href,t)}})();const f=`:host{position:relative;display:block;background-color:var(--color-surface-1)}.slidesWrapper{display:grid;grid-auto-flow:column;grid-auto-columns:100%;overflow-x:hidden;scroll-snap-type:x mandatory;scroll-behavior:smooth;-webkit-overflow-scrolling:touch}
`;class d extends HTMLElement{constructor(){super(...arguments);c(this,"_items",[]);c(this,"_slidesWrapper",null);c(this,"currentFrame",0)}connectedCallback(){var e;const r=this._createTemplate();this.attachShadow({mode:"open"}),(e=this.shadowRoot)==null||e.appendChild(r),this._items=Array.from(this.children).filter(t=>t.hasAttribute("data-slide"));const s=this._createItemsObserver();this._items.forEach(t=>s.observe(t)),this._update(),this.setAttribute("data-active","")}disconnectedCallback(){}_createTemplate(){const r=document.createElement("template"),s=document.createElement("style");s.textContent=f,this._slidesWrapper=document.createElement("div"),this._slidesWrapper.classList.add("slidesWrapper");const e=document.createElement("slot"),t=r.content;return t.appendChild(s),this._slidesWrapper.appendChild(e),t.appendChild(this._slidesWrapper),t}_createItemsObserver(){return new IntersectionObserver(r=>{r.forEach(({intersectionRatio:s,target:e})=>{if(s>.5){const t=this._items.findIndex(o=>o===e);this.currentFrame=t,this._update()}})},{threshold:.5})}goTo(r){return this.currentFrame=Math.max(0,Math.min(this._items.length-1,r)),this._items[this.currentFrame].scrollIntoView(),this._update(),this.currentFrame}_update(){this._items.forEach((r,s)=>{const e=s===this.currentFrame;r.ariaHidden=(!e).toString(),e||r.setAttribute("disabled",""),e&&r.removeAttribute("disabled")})}}const y=()=>customElements.define("slider-element",d);class _ extends HTMLFormElement{constructor(){super(...arguments);c(this,"_slider",new d)}connectedCallback(){const r=this.querySelector('input[type="submit"]');r==null||r.style.setProperty("display","none"),this._slider.innerHTML=this.innerHTML,this._slider.addEventListener("end",()=>{console.log("fin")}),this.innerHTML="",this.appendChild(this._slider),this.addEventListener("change",()=>{var t;const s=this._slider.currentFrame+1,e=(t=this._slider)==null?void 0:t.goTo(s);s>e&&this.submit()})}submit(){const r=this.getAttribute("data-results");if(!r)return;const s=JSON.parse(r),e=new FormData(this),t=new Map;e.forEach(l=>{const a=l.toString(),h=t.get(a)??0;t.set(a,h+1)});const[o]=Array.from(t).reduce((l,a)=>a[1]>l[1]?a:l,["",-1]),u=atob(s[parseInt(o)]);location.href=u}}const b=()=>customElements.define("quiz-element",_,{extends:"form"});y();b();
