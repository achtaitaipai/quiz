var u=Object.defineProperty;var m=(o,n,r)=>n in o?u(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r;var a=(o,n,r)=>(m(o,typeof n!="symbol"?n+"":n,r),r);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const i of e.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function s(t){if(t.ep)return;t.ep=!0;const e=r(t);fetch(t.href,e)}})();const f=`:host{position:relative;display:block;border:2px solid var(--color-lightish)}.slidesWrapper{display:grid;grid-auto-flow:column;grid-auto-columns:100%;overflow-x:hidden;scroll-snap-type:x mandatory;scroll-behavior:smooth;-webkit-overflow-scrolling:touch}progress:not([value]){display:none}progress{appearance:none;-webkit-appearance:none;position:absolute;left:0;top:0;overflow:hidden;width:100%;height:1px;translate:0 -50%}progress::-webkit-progress-value{background-color:#1a8bcd;transition:width .3s ease-in}progress::-webkit-progress-bar{background-color:transparent}
`;class d extends HTMLElement{constructor(){super(...arguments);a(this,"_items",[]);a(this,"_progressBar",null);a(this,"_slidesWrapper",null);a(this,"currentFrame",0)}connectedCallback(){var t;const r=this._createTemplate();this.attachShadow({mode:"open"}),(t=this.shadowRoot)==null||t.appendChild(r),this._items=Array.from(this.children).filter(e=>e.hasAttribute("data-slide"));const s=this._createItemsObserver();this._items.forEach(e=>s.observe(e)),this._update(),this.setAttribute("data-active","")}disconnectedCallback(){}_createTemplate(){const r=document.createElement("template"),s=document.createElement("style");s.textContent=f,this._progressBar=document.createElement("progress"),this._slidesWrapper=document.createElement("div"),this._slidesWrapper.classList.add("slidesWrapper");const t=document.createElement("slot"),e=r.content;return e.appendChild(s),e.appendChild(this._progressBar),this._slidesWrapper.appendChild(t),e.appendChild(this._slidesWrapper),e}_createItemsObserver(){return new IntersectionObserver(r=>{r.forEach(({intersectionRatio:s,target:t})=>{if(s>.5){const e=this._items.findIndex(i=>i===t);this.currentFrame=e,this._update()}})},{threshold:.5})}goTo(r){return this.currentFrame=Math.max(0,Math.min(this._items.length-1,r)),this._items[this.currentFrame].scrollIntoView(),this._update(),this.currentFrame}_update(){var r,s;this._items.forEach((t,e)=>{const i=e===this.currentFrame;t.ariaHidden=(!i).toString()}),(r=this._progressBar)==null||r.setAttribute("max",(this._items.length-1).toString()),(s=this._progressBar)==null||s.setAttribute("value",this.currentFrame.toString())}}const g=()=>customElements.define("slider-element",d);class _ extends HTMLFormElement{constructor(){super(...arguments);a(this,"_slider",new d)}connectedCallback(){const r=this.querySelector('input[type="submit"]');r==null||r.style.setProperty("display","none"),this._slider.innerHTML=this.innerHTML,this._slider.addEventListener("end",()=>{console.log("fin")}),this.innerHTML="",this.appendChild(this._slider),this.addEventListener("change",()=>{var e;const s=this._slider.currentFrame+1,t=(e=this._slider)==null?void 0:e.goTo(s);s>t&&this.submit()})}submit(){const r=this.getAttribute("data-results");if(!r)return;const s=JSON.parse(r),t=new FormData(this),e=new Map;t.forEach(c=>{const l=c.toString(),p=e.get(l)??0;e.set(l,p+1)});const[i]=Array.from(e).reduce((c,l)=>l[1]>c[1]?l:c,["",-1]),h=atob(s[parseInt(i)]);location.href=h}}const b=()=>customElements.define("quiz-element",_,{extends:"form"});g();b();
